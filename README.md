# MacOS Key Sound - GUI 版本

一款运行在 macOS 系统托盘的键盘音效应用，在后台监听键盘输入并播放音效。

## ✨ 主要功能

- **系统托盘运行**: 应用启动后会显示在系统托盘（状态栏），不会打开主窗口
- **键盘音效**: 监听全局键盘输入，每次按键时播放提示音效
- **便捷控制**: 右键点击托盘图标可以：
  - ✓ 开启/关闭音效
  - 退出应用
- **设置持久化**: 音效开关状态会自动保存，下次启动时恢复
- **低内存占用**: 使用 Rust 开发，性能优异，资源占用极低

## 📦 安装使用

1. **下载安装**：

   - 下载 `MacOS Key Sound 0.1.0.dmg` 文件
   - 双击挂载 DMG 文件
   - 将 `MacOS Key Sound.app` 拖拽到 Applications 文件夹

2. **首次运行**：

   - 从启动台或应用程序文件夹启动应用
   - macOS 会提示授予"辅助功能权限"
   - 前往 `系统偏好设置 > 安全性与隐私 > 隐私 > 辅助功能`
   - 勾选 `MacOS Key Sound` 应用

3. **日常使用**：
   - 应用启动后会在系统托盘显示音符图标 🎵
   - 右键点击托盘图标查看菜单
   - 点击 "启用音效" 开关来控制音效播放
   - 应用会在后台持续运行，监听键盘事件

## 🎵 音效文件

应用使用 `assets/sound.wav` 作为按键音效文件。您可以替换此文件来使用自定义音效：

- 支持格式：WAV、MP3、OGG 等
- 建议时长：0.1-0.5 秒
- 建议音量：适中，避免过于刺耳

## 🛠 技术栈

- **开发语言**: Rust
- **GUI 框架**: tray-icon + winit (轻量级系统托盘)
- **音频处理**: rodio (支持多种音频格式)
- **键盘监听**: rdev (全局键盘事件监听)
- **设置存储**: serde + JSON (用户设置持久化)

## 🔧 开发构建

```bash
# 克隆项目
git clone <repository-url>
cd rust-key

# 安装依赖
cargo build --release

# 创建 macOS 应用包
cargo bundle --release

# 创建 DMG 安装包
create-dmg --no-code-sign --overwrite "target/release/bundle/osx/MacOS Key Sound.app" dist/
```

## 📂 项目结构

```
├── src/
│   └── main.rs          # 主程序文件
├── assets/
│   └── sound.wav        # 默认音效文件
├── Cargo.toml           # 项目配置
├── build.sh             # 自动构建脚本
├── DMG打包详细教程.md    # 详细打包教程
└── README.md            # 项目说明
```

## ⚠️ 注意事项

- **权限要求**: 应用需要"辅助功能权限"才能监听全局键盘事件
- **系统兼容**: 支持 macOS 10.15 及以上版本
- **安全提示**: 首次运行未签名应用时，系统会显示安全警告，这是正常现象
- **后台运行**: 应用会持续在后台运行，通过托盘图标管理，不占用 Dock 位置

## 🔮 计划功能

- [ ] 支持多种音效文件选择
- [ ] 音量调节功能
- [ ] 不同按键类型使用不同音效
- [ ] 热键快速开关音效
- [ ] 自定义音效文件导入

---

**开发者**: Timo Zhang  
**版本**: 0.1.0  
**许可证**: MIT License
